{% extends 'base.html' %}
{% block extra_head %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
{% endblock %}
{% block content %}
<div style="max-width: 430px; margin: 3em auto 4em auto; background: #181f1b; border-radius: 14px; box-shadow: 0 4px 24px #0003; padding: 2.5em 2em;" class="animate__animated animate__fadeInDown">
    <h2 style="color: #f6a32b; text-align: center; font-size: 2em; margin-bottom: 1.2em; letter-spacing: 1px;">Create Account</h2>
    <form method="post" style="display: flex; flex-direction: column; gap: 1.3em;">
        {% csrf_token %}
        {% for field in form %}
        <div style="display: flex; flex-direction: column; gap: 0.4em; position: relative;">
            <label for="{{ field.id_for_label }}" style="color: #f6a32b; font-weight: 500;">{{ field.label }}</label>
            {% if field.field.widget.input_type == 'password' %}
                <div style="position:relative;display:flex;align-items:center;">
                    {{ field }}
                    <button type="button" class="toggle-password" tabindex="-1" style="position:absolute;right:1em;top:50%;transform:translateY(-50%);background:none;border:none;outline:none;cursor:pointer;padding:0;">
                        <svg class="eye-icon" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#f6a32b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><ellipse cx="12" cy="12" rx="8" ry="5.5"/><circle cx="12" cy="12" r="2.5"/></svg>
                    </button>
                </div>
            {% else %}
                {{ field }}
            {% endif %}
            {% if field.errors %}<span style="color:#ff6a6a;font-size:0.95em;">{{ field.errors.0 }}</span>{% endif %}
        </div>
        {% endfor %}
        <button type="submit" class="btn-orange" style="margin-top: 1em; font-size: 1.1em; padding: 0.9em 0; border-radius: 5px; font-weight: bold; letter-spacing: 1px;">Register</button>
    </form>
    <div style="text-align:center;margin-top:1.5em;color:#ccc;font-size:1em;">Already have an account? <a href="/users/login/" style="color:#f6a32b;text-decoration:underline;">Login</a></div>
</div>
<style>
    .users-form input, .users-form select, .users-form textarea {
        background: #101917;
        border: 1px solid #333;
        color: #fff;
        border-radius: 4px;
        padding: 0.8em 1em;
        font-size: 1em;
        outline: none;
        transition: border 0.2s;
    }
    .users-form input:focus, .users-form select:focus, .users-form textarea:focus {
        border: 1.5px solid #f6a32b;
    }
</style>
<script>
    // Add Animate.css fadeInDown on page load
    document.addEventListener('DOMContentLoaded', function() {
        const box = document.querySelector('.animate__animated');
        if (box) {
            box.classList.add('animate__fadeInDown');
        }

        // Password eye toggle
        document.querySelectorAll('.toggle-password').forEach(function(btn) {
            btn.addEventListener('click', function(e) {
                e.preventDefault();
                const input = btn.parentElement.querySelector('input[type="password"], input[type="text"]');
                if (input) {
                    if (input.type === 'password') {
                        input.type = 'text';
                        btn.querySelector('.eye-icon').innerHTML = '<ellipse cx="12" cy="12" rx="8" ry="5.5"/><circle cx="12" cy="12" r="2.5"/><line x1="4" y1="20" x2="20" y2="4" stroke="#f6a32b" stroke-width="2"/>';
                    } else {
                        input.type = 'password';
                        btn.querySelector('.eye-icon').innerHTML = '<ellipse cx="12" cy="12" rx="8" ry="5.5"/><circle cx="12" cy="12" r="2.5"/>';
                    }
                }
            });
        });
    });
</script>
{% endblock %}
